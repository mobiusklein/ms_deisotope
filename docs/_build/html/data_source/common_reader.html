
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Common MS File Model &#8212; ms_deisotope  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/haiku.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="File Metadata" href="metadata/index.html" />
    <link rel="prev" title="Common Scan Model" href="common_scan.html" /> 
  </head><body>
      <div class="header" role="banner"><img class="rightlogo" src="../_static/logo.svg" alt="Logo"/><h1 class="heading"><a href="../index.html">
          <span>ms_deisotope  documentation</span></a></h1>
        <h2 class="heading"><span>Common MS File Model</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="common_scan.html">Common Scan Model</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="metadata/index.html">File Metadata</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="common-ms-file-model">
<h1>Common MS File Model<a class="headerlink" href="#common-ms-file-model" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><code class="xref py py-mod docutils literal notranslate"><span class="pre">ms_deisotope.data_source</span></code> uses a set of common interfaces for reading
mass spectrometry data files so that code written for one format should work
for all formats which implement the same interfaces.</p>
<p><code class="xref py py-mod docutils literal notranslate"><span class="pre">ms_deisotope.data_source.metadata</span></code> defines a set of data structures and
a collection of controlled vocabulary terms describing mass spectrometers and
mass spectrometry data files.</p>
</div></blockquote>
<span class="target" id="module-ms_deisotope.data_source.common"></span><div class="section" id="abstract-base-classes">
<h2>Abstract Base Classes<a class="headerlink" href="#abstract-base-classes" title="Permalink to this headline">¶</a></h2>
<p><code class="xref py py-mod docutils literal notranslate"><span class="pre">ms_deisotope</span></code> supports reading from many different file formats. While
the file format is abstracted away as much as possible, the modes of access are
built into the type hierarchy.</p>
<p>All of the currently implemented formats implement both <a class="reference internal" href="#ms_deisotope.data_source.common.ScanIterator" title="ms_deisotope.data_source.common.ScanIterator"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScanIterator</span></code></a> and
<a class="reference internal" href="#ms_deisotope.data_source.common.RandomAccessScanSource" title="ms_deisotope.data_source.common.RandomAccessScanSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">RandomAccessScanSource</span></code></a>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="ms_deisotope.data_source.common.ScanDataSource">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ms_deisotope.data_source.common.</span></span><span class="sig-name descname"><span class="pre">ScanDataSource</span></span><a class="reference internal" href="../_modules/ms_deisotope/data_source/scan/loader.html#ScanDataSource"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ms_deisotope.data_source.common.ScanDataSource" title="Permalink to this definition">¶</a></dt>
<dd><p>An Abstract Base Class describing an object
which can provide a consistent set of accessors
for a particular format of mass spectrometry data.</p>
<p>Data files come in many shapes and sizes, with different
underlying structures. This class provides an API that
should make features as consistent as possible to clients
of <a class="reference internal" href="common_scan.html#ms_deisotope.data_source.common.Scan" title="ms_deisotope.data_source.common.Scan"><code class="xref py py-class docutils literal notranslate"><span class="pre">Scan</span></code></a> objects.</p>
<dl class="py method">
<dt class="sig sig-object py" id="ms_deisotope.data_source.common.ScanDataSource.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ms_deisotope/data_source/scan/loader.html#ScanDataSource.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ms_deisotope.data_source.common.ScanDataSource.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the underlying scan data stream, which may be a file or other
system resource.</p>
<p>A closed data source may not be able to serve data requests, but not all
<a class="reference internal" href="#ms_deisotope.data_source.common.ScanDataSource" title="ms_deisotope.data_source.common.ScanDataSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScanDataSource</span></code></a> implementations require the data stream be open
for all operations.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ms_deisotope.data_source.common.ScanDataSource.source_file_name">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">source_file_name</span></span><a class="headerlink" href="#ms_deisotope.data_source.common.ScanDataSource.source_file_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of the file that backs this data source, if available.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> or <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ms_deisotope.data_source.common.ScanIterator">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ms_deisotope.data_source.common.</span></span><span class="sig-name descname"><span class="pre">ScanIterator</span></span><a class="reference internal" href="../_modules/ms_deisotope/data_source/scan/loader.html#ScanIterator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ms_deisotope.data_source.common.ScanIterator" title="Permalink to this definition">¶</a></dt>
<dd><p>An Abstract Base Class that extends ScanDataSource
with additional requirements that enable clients of the
class to treat the object as an iterator over the underlying
data file.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ms_deisotope.data_source.common.ScanIterator.iteration_mode">
<span class="sig-name descname"><span class="pre">iteration_mode</span></span><a class="headerlink" href="#ms_deisotope.data_source.common.ScanIterator.iteration_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>A string denoting <code class="xref py py-const docutils literal notranslate"><span class="pre">ITERATION_MODE_GROUPED</span></code> or <code class="xref py py-const docutils literal notranslate"><span class="pre">ITERATION_MODE_SINGLE</span></code>
that controls whether <a class="reference internal" href="common_scan.html#ms_deisotope.data_source.common.ScanBunch" title="ms_deisotope.data_source.common.ScanBunch"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScanBunch</span></code></a> or <a class="reference internal" href="common_scan.html#ms_deisotope.data_source.common.Scan" title="ms_deisotope.data_source.common.Scan"><code class="xref py py-class docutils literal notranslate"><span class="pre">Scan</span></code></a> are produced
by iteration.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ms_deisotope.data_source.common.ScanIterator.has_ms1_scans">
<span class="sig-name descname"><span class="pre">has_ms1_scans</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ms_deisotope/data_source/scan/loader.html#ScanIterator.has_ms1_scans"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ms_deisotope.data_source.common.ScanIterator.has_ms1_scans" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if this <a class="reference internal" href="#ms_deisotope.data_source.common.ScanDataSource" title="ms_deisotope.data_source.common.ScanDataSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScanDataSource</span></code></a> contains MS1 spectra.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Returns a boolean value if the presence of MS1 scans is known for certain, or <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>
if it cannot be determined in the case of missing metadata.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code> or <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ms_deisotope.data_source.common.ScanIterator.has_msn_scans">
<span class="sig-name descname"><span class="pre">has_msn_scans</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ms_deisotope/data_source/scan/loader.html#ScanIterator.has_msn_scans"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ms_deisotope.data_source.common.ScanIterator.has_msn_scans" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if this <a class="reference internal" href="#ms_deisotope.data_source.common.ScanDataSource" title="ms_deisotope.data_source.common.ScanDataSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScanDataSource</span></code></a> contains MSn spectra.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Returns a boolean value if the presence of MSn scans is known for certain, or <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>
if it cannot be determined in the case of missing metadata.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code> or <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ms_deisotope.data_source.common.ScanIterator.initialize_scan_cache">
<span class="sig-name descname"><span class="pre">initialize_scan_cache</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ms_deisotope/data_source/scan/loader.html#ScanIterator.initialize_scan_cache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ms_deisotope.data_source.common.ScanIterator.initialize_scan_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a cache which keeps track of which <a class="reference internal" href="common_scan.html#ms_deisotope.data_source.common.Scan" title="ms_deisotope.data_source.common.Scan"><code class="xref py py-class docutils literal notranslate"><span class="pre">Scan</span></code></a>
objects are still in memory using a <code class="xref py py-class docutils literal notranslate"><span class="pre">weakref.WeakValueDictionary</span></code>.</p>
<p>When a scan is requested, if the scan object is found in the cache, the
existing object is returned rather than re-read from disk.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ms_deisotope.data_source.common.ScanIterator.make_iterator">
<span class="sig-name descname"><span class="pre">make_iterator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iterator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grouped</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ms_deisotope/data_source/scan/loader.html#ScanIterator.make_iterator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ms_deisotope.data_source.common.ScanIterator.make_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the <a class="reference internal" href="#ms_deisotope.data_source.common.ScanIterator" title="ms_deisotope.data_source.common.ScanIterator"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScanIterator</span></code></a>’s behavior, selecting it’s iteration strategy over
either its default iterator or the provided <code class="docutils literal notranslate"><span class="pre">iterator</span></code> argument.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iterator</strong> (<em>Iterator</em><em>, </em><em>optional</em>) – The iterator to manipulate. If missing, the default
iterator will be used.</p></li>
<li><p><strong>grouped</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether the iterator should be grouped and produce <a class="reference internal" href="common_scan.html#ms_deisotope.data_source.common.ScanBunch" title="ms_deisotope.data_source.common.ScanBunch"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScanBunch</span></code></a> objects
or single <a class="reference internal" href="common_scan.html#ms_deisotope.data_source.common.Scan" title="ms_deisotope.data_source.common.Scan"><code class="xref py py-class docutils literal notranslate"><span class="pre">Scan</span></code></a>. If <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code> is passed, <a class="reference internal" href="#ms_deisotope.data_source.common.ScanIterator.has_ms1_scans" title="ms_deisotope.data_source.common.ScanIterator.has_ms1_scans"><code class="xref py py-meth docutils literal notranslate"><span class="pre">has_ms1_scans()</span></code></a> will be
be used instead. Defaults to <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ms_deisotope.data_source.common.ScanIterator.next">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">next</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ms_deisotope/data_source/scan/loader.html#ScanIterator.next"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ms_deisotope.data_source.common.ScanIterator.next" title="Permalink to this definition">¶</a></dt>
<dd><p>Advance the iterator, fetching the next <a class="reference internal" href="common_scan.html#ms_deisotope.data_source.common.ScanBunch" title="ms_deisotope.data_source.common.ScanBunch"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScanBunch</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">ScanBase</span></code>
depending upon iteration strategy.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="common_scan.html#ms_deisotope.data_source.common.ScanBunch" title="ms_deisotope.data_source.common.ScanBunch"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScanBunch</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">ScanBase</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ms_deisotope.data_source.common.ScanIterator.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ms_deisotope/data_source/scan/loader.html#ScanIterator.reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ms_deisotope.data_source.common.ScanIterator.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the iterator, if possible, and clear any caches.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ms_deisotope.data_source.common.ScanIterator.scan_cache">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">scan_cache</span></span><a class="headerlink" href="#ms_deisotope.data_source.common.ScanIterator.scan_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">weakref.WeakValueDictionary</span></code> mapping used to retrieve
scans from memory if available before re-reading them from disk.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ms_deisotope.data_source.common.RandomAccessScanSource">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ms_deisotope.data_source.common.</span></span><span class="sig-name descname"><span class="pre">RandomAccessScanSource</span></span><a class="reference internal" href="../_modules/ms_deisotope/data_source/scan/loader.html#RandomAccessScanSource"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ms_deisotope.data_source.common.RandomAccessScanSource" title="Permalink to this definition">¶</a></dt>
<dd><p>An Abstract Base Class that extends ScanIterator
with additional requirements that the implementation support
random access to individual scans. This should be doable by unique
identifier, sequential index, or by scan time.</p>
<dl class="py method">
<dt class="sig sig-object py" id="ms_deisotope.data_source.common.RandomAccessScanSource.find_next_ms1">
<span class="sig-name descname"><span class="pre">find_next_ms1</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start_index</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ms_deisotope/data_source/scan/loader.html#RandomAccessScanSource.find_next_ms1"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ms_deisotope.data_source.common.RandomAccessScanSource.find_next_ms1" title="Permalink to this definition">¶</a></dt>
<dd><p>Locate the MS1 scan following <code class="docutils literal notranslate"><span class="pre">start_index</span></code>, iterating forwards through
scans until either the last scan is reached or an MS1 scan is found.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ScanBase</span></code> or <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code> if not found</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ms_deisotope.data_source.common.RandomAccessScanSource.find_previous_ms1">
<span class="sig-name descname"><span class="pre">find_previous_ms1</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start_index</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ms_deisotope/data_source/scan/loader.html#RandomAccessScanSource.find_previous_ms1"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ms_deisotope.data_source.common.RandomAccessScanSource.find_previous_ms1" title="Permalink to this definition">¶</a></dt>
<dd><p>Locate the MS1 scan preceding <code class="docutils literal notranslate"><span class="pre">start_index</span></code>, iterating backwards through
scans until either the first scan is reached or an MS1 scan is found.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ScanBase</span></code> or <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code> if not found</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ms_deisotope.data_source.common.RandomAccessScanSource.get_scan_by_id">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">get_scan_by_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ms_deisotope/data_source/scan/loader.html#RandomAccessScanSource.get_scan_by_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ms_deisotope.data_source.common.RandomAccessScanSource.get_scan_by_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the scan object for the specified scan id.</p>
<p>If the scan object is still bound and in memory somewhere,
a reference to that same object will be returned. Otherwise,
a new object will be created.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>scan_id</strong> (<em>str</em>) – The unique scan id value to be retrieved</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="common_scan.html#ms_deisotope.data_source.common.Scan" title="ms_deisotope.data_source.common.Scan">Scan</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ms_deisotope.data_source.common.RandomAccessScanSource.get_scan_by_index">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">get_scan_by_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ms_deisotope/data_source/scan/loader.html#RandomAccessScanSource.get_scan_by_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ms_deisotope.data_source.common.RandomAccessScanSource.get_scan_by_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the scan object for the specified scan index.</p>
<p>This internally calls <a class="reference internal" href="#ms_deisotope.data_source.common.RandomAccessScanSource.get_scan_by_id" title="ms_deisotope.data_source.common.RandomAccessScanSource.get_scan_by_id"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_scan_by_id()</span></code></a> which will
use its cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>index</strong> (<em>int</em>) – The index to get the scan for</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="common_scan.html#ms_deisotope.data_source.common.Scan" title="ms_deisotope.data_source.common.Scan">Scan</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ms_deisotope.data_source.common.RandomAccessScanSource.get_scan_by_time">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">get_scan_by_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ms_deisotope/data_source/scan/loader.html#RandomAccessScanSource.get_scan_by_time"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ms_deisotope.data_source.common.RandomAccessScanSource.get_scan_by_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the scan object for the specified scan time.</p>
<p>This internally calls <a class="reference internal" href="#ms_deisotope.data_source.common.RandomAccessScanSource.get_scan_by_id" title="ms_deisotope.data_source.common.RandomAccessScanSource.get_scan_by_id"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_scan_by_id()</span></code></a> which will
use its cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>time</strong> (<em>float</em>) – The time to get the nearest scan from</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="common_scan.html#ms_deisotope.data_source.common.Scan" title="ms_deisotope.data_source.common.Scan">Scan</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ms_deisotope.data_source.common.RandomAccessScanSource.has_fast_random_access">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">has_fast_random_access</span></span><a class="headerlink" href="#ms_deisotope.data_source.common.RandomAccessScanSource.has_fast_random_access" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the underlying data stream supports fast random access
or not.</p>
<p>Even if the file format supports random access, it may be impractical due
to overhead in parsing the underlying data stream, e.g. calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">gzip.GzipFile.seek()</span></code>
can force the file to be decompressed from the <em>beginning of the file</em> on each call. This
property can be used to signal to the caller whether or not it should use a different
strategy.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>One of <code class="xref py py-data docutils literal notranslate"><span class="pre">DefinitelyNotFastRandomAccess</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">MaybeFastRandomAccess</span></code>, or
<code class="xref py py-data docutils literal notranslate"><span class="pre">DefinitelyFastRandomAccess</span></code>. The first is a False-y value, the latter two
will evaluate to <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Constant</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ms_deisotope.data_source.common.RandomAccessScanSource.start_from_scan">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">start_from_scan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">require_ms1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grouped</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ms_deisotope/data_source/scan/loader.html#RandomAccessScanSource.start_from_scan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ms_deisotope.data_source.common.RandomAccessScanSource.start_from_scan" title="Permalink to this definition">¶</a></dt>
<dd><p>Reconstruct an iterator which will start from the scan matching one of <code class="docutils literal notranslate"><span class="pre">scan_id</span></code>,
<code class="docutils literal notranslate"><span class="pre">rt</span></code>, or <code class="docutils literal notranslate"><span class="pre">index</span></code>. Only one may be provided.</p>
<p>After invoking this method, the iterator this object wraps will be changed to begin
yielding scan bunchs (or single scans if <code class="docutils literal notranslate"><span class="pre">grouped</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>).</p>
<p>This method will trigger several random-access operations, making it prohibitively
expensive for normally compressed files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scan_id</strong> (<em>str</em><em>, </em><em>optional</em>) – Start from the scan with the specified id.</p></li>
<li><p><strong>rt</strong> (<em>float</em><em>, </em><em>optional</em>) – Start from the scan nearest to specified time (in minutes) in the run. If no
exact match is found, the nearest scan time will be found, rounded up.</p></li>
<li><p><strong>index</strong> (<em>int</em><em>, </em><em>optional</em>) – Start from the scan with the specified index.</p></li>
<li><p><strong>require_ms1</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether the iterator must start from an MS1 scan. True by default.</p></li>
<li><p><strong>grouped</strong> (<em>bool</em><em>, </em><em>optional</em>) – whether the iterator should yield scan bunches or single scans. True by default.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ms_deisotope.data_source.common.RandomAccessScanSource.time">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">time</span></span><a class="headerlink" href="#ms_deisotope.data_source.common.RandomAccessScanSource.time" title="Permalink to this definition">¶</a></dt>
<dd><p>A indexer facade that lets you index and slice by scan time.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>TimeIndex</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="iteratation-strategies">
<h2>Iteratation Strategies<a class="headerlink" href="#iteratation-strategies" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="#ms_deisotope.data_source.common.ScanIterator" title="ms_deisotope.data_source.common.ScanIterator"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScanIterator</span></code></a> instances may iterate over scans in <a class="reference internal" href="../glossary.html#term-single"><span class="xref std std-term">single</span></a> or <a class="reference internal" href="../glossary.html#term-grouped"><span class="xref std std-term">grouped</span></a> strategies.
<a class="reference internal" href="../glossary.html#term-single"><span class="xref std std-term">single</span></a> mode produces a single instance of <a class="reference internal" href="common_scan.html#ms_deisotope.data_source.common.Scan" title="ms_deisotope.data_source.common.Scan"><code class="xref py py-class docutils literal notranslate"><span class="pre">Scan</span></code></a> on each iteration, while <a class="reference internal" href="../glossary.html#term-grouped"><span class="xref std std-term">grouped</span></a>
produces a <a class="reference internal" href="common_scan.html#ms_deisotope.data_source.common.ScanBunch" title="ms_deisotope.data_source.common.ScanBunch"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScanBunch</span></code></a> containing an MS1 <a class="reference internal" href="common_scan.html#ms_deisotope.data_source.common.Scan" title="ms_deisotope.data_source.common.Scan"><code class="xref py py-class docutils literal notranslate"><span class="pre">Scan</span></code></a> (may be <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>) and 0 or more
related MSn <a class="reference internal" href="common_scan.html#ms_deisotope.data_source.common.Scan" title="ms_deisotope.data_source.common.Scan"><code class="xref py py-class docutils literal notranslate"><span class="pre">Scan</span></code></a> instances which are derived from the MS1 <a class="reference internal" href="common_scan.html#ms_deisotope.data_source.common.Scan" title="ms_deisotope.data_source.common.Scan"><code class="xref py py-class docutils literal notranslate"><span class="pre">Scan</span></code></a>. The default
mode for a given <a class="reference internal" href="#ms_deisotope.data_source.common.ScanIterator" title="ms_deisotope.data_source.common.ScanIterator"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScanIterator</span></code></a> depends upon both the file format and available metadata.</p>
<p>You can force the iteration strategy to be <a class="reference internal" href="../glossary.html#term-grouped"><span class="xref std std-term">grouped</span></a> when calling <a class="reference internal" href="#ms_deisotope.data_source.common.ScanIterator.make_iterator" title="ms_deisotope.data_source.common.ScanIterator.make_iterator"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ScanIterator.make_iterator()</span></code></a>
by passing <code class="docutils literal notranslate"><span class="pre">grouped=True</span></code>, and <a class="reference internal" href="../glossary.html#term-single"><span class="xref std std-term">single</span></a> by passing <code class="docutils literal notranslate"><span class="pre">grouped=False</span></code>. The same applies to
<a class="reference internal" href="#ms_deisotope.data_source.common.RandomAccessScanSource.start_from_scan" title="ms_deisotope.data_source.common.RandomAccessScanSource.start_from_scan"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RandomAccessScanSource.start_from_scan()</span></code></a>. When <a class="reference internal" href="../glossary.html#term-grouped"><span class="xref std std-term">grouped</span></a> mode is requested but cannot be
fulfilled, <a class="reference internal" href="common_scan.html#ms_deisotope.data_source.common.ScanBunch" title="ms_deisotope.data_source.common.ScanBunch"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScanBunch</span></code></a> objects are still produced, but the <a class="reference internal" href="common_scan.html#ms_deisotope.data_source.common.ScanBunch.precursor" title="ms_deisotope.data_source.common.ScanBunch.precursor"><code class="xref py py-attr docutils literal notranslate"><span class="pre">precursor</span></code></a> may be
<code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code> or <a class="reference internal" href="common_scan.html#ms_deisotope.data_source.common.ScanBunch.products" title="ms_deisotope.data_source.common.ScanBunch.products"><code class="xref py py-attr docutils literal notranslate"><span class="pre">products</span></code></a> may be empty.</p>
<p>The iteration mode of a <a class="reference internal" href="#ms_deisotope.data_source.common.ScanIterator" title="ms_deisotope.data_source.common.ScanIterator"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScanIterator</span></code></a> is always available through it’s <code class="xref py py-attr docutils literal notranslate"><span class="pre">iteration_mode</span></code>
attribute, which should have the value <code class="docutils literal notranslate"><span class="pre">&quot;single&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;grouped&quot;</span></code> accordingy.</p>
</div>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="common_scan.html">Common Scan Model</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="metadata/index.html">File Metadata</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Joshua Klein.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.2.0.
    </div>
  </body>
</html>